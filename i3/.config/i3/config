# vim: filetype=i3

###---Basic Definitions---###

set $term alacritty

set $incvol amixer -D pulse sset Master 5%+
set $decvol amixer -D pulse sset Master 5%-
set $mute amixer -D pulse set Master 1+ toggle
set $truemute amixer -D sset Master 0

# i3-gaps
gaps inner 10
gaps outer 0

smart_gaps on
smart_borders on

# (No) Title Bars
for_window [class="^.*"] border pixel 3

# Colors
set $black       #212121
set $darkblack   #000000
set $red         #fb4934
set $darkred     #cc241d
set $green       #b8bb26
set $darkgreen   #98971a
set $yellow      #fabd2f
set $darkyellow  #d79921
set $blue        #83a598
set $darkblue    #458588
set $magenta     #d3869b
set $darkmagenta #b16286
set $cyan        #8ec07c
set $darkcyan    #689d6a
set $white       #ebdbb2
set $darkwhite   #a89984
set $background  #000000
set $transparent #00000000

# Workspaces
set $ws1 1-web
set $ws2 2-term
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9-chat
set $ws10 10-media

workspace $ws10 gaps inner 70
workspace $ws10 gaps outer 180

set $wallpaper ~/.wallpapers/outrun.png

# Mod4 is windows key, Mod1 is alt
set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Iosevka, FontAwesome 11

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Set colors from Xresources
# NOTE: The '#f0f0f0' in the lines below is the color i3 will use if
# it fails to get colors from Xresources.
set_from_resource $bg i3wm.color0 #f0f0f0
set_from_resource $fg i3wm.color4 #f0f0f0

# class                 border  backgr. text indicator child_border
client.focused          $fg     $fg     $bg  $fg       $fg
client.focused_inactive $bg     $fg     $bg  $fg       $bg
client.unfocused        $bg     $fg     $bg  $fg       $bg
client.urgent           $fg     $fg     $bg  $fg       $fg
client.placeholder      $fg     $fg     $bg  $fg       $fg

client.background       $fg


###---Bindings---###

bindsym $mod+Return			exec $term
bindsym $mod+apostrophe		split horizontal; exec $term
bindsym $mod+slash			split vertical; exec $term

bindsym $mod+r				exec $term -e fish -c ranger
bindsym $mod+Shift+r		exec $term -e fish -c "sudo ranger /"

bindsym $mod+Shift+p		exec $term -e vim +Calendar.vim

bindsym $mod+p				exec $term -e htop

bindsym $mod+q				kill
bindsym $mod+Shift+q		kill

bindsym $mod+d				exec --no-startup-id i3-dmenu-desktop --dmenu='rofi -i -dmenu -p "run"'
bindsym $mod+o				exec --no-startup-id finder

bindsym Print	 			exec teiler --quickcopy area
bindsym Shift+Print	 		exec teiler

bindsym $mod+c				exec copyq menu

# Window manipulation

bindsym $mod+h				focus left
bindsym $mod+j				focus down
bindsym $mod+k				focus up
bindsym $mod+l				focus right
bindsym $mod+Left			focus left
bindsym $mod+Down			focus down
bindsym $mod+Up				focus up
bindsym $mod+Right			focus right

bindsym $mod+Shift+h		move left 30
bindsym $mod+Shift+j		move down 30
bindsym $mod+Shift+k		move up 30
bindsym $mod+Shift+l		move right 30
bindsym $mod+Shift+Left		move left 30
bindsym $mod+Shift+Down		move down 30
bindsym $mod+Shift+Up		move up 30
bindsym $mod+Shift+Right	move right 30
bindsym $mod+Shift+c		move position center

bindsym $mod+s				gaps inner current plus 10
bindsym $mod+Shift+s		gaps inner current minus 10
bindsym $mod+z				gaps outer current plus 10
bindsym $mod+Shift+z		gaps outer current minus 10

bindsym $mod+Shift+d		gaps inner current set 0; gaps outer current set 0
bindsym $mod+Shift+t		gaps inner current set 10; gaps outer current set 0

bindsym $mod+Shift+y		resize shrink width 30 px or 5 ppt
bindsym $mod+Shift+u		resize grow height 30 px or 5 ppt
bindsym $mod+Shift+i		resize shrink height 30 px or 5 ppt
bindsym $mod+Shift+o		resize grow width 30 px or 5 ppt

bindsym $mod+t				split toggle

bindsym $mod+f				fullscreen toggle

bindsym $mod+Shift+space	floating toggle
bindsym $mod+space			focus mode_toggle

# Workspaces

bindsym $mod+1				workspace $ws1
bindsym $mod+2				workspace $ws2
bindsym $mod+3				workspace $ws3
bindsym $mod+4				workspace $ws4
bindsym $mod+5				workspace $ws5
bindsym $mod+6				workspace $ws6
bindsym $mod+7				workspace $ws7
bindsym $mod+8				workspace $ws8
bindsym $mod+9				workspace $ws9
bindsym $mod+0				workspace $ws10

bindsym $mod+Shift+1		move container to workspace $ws1
bindsym $mod+Shift+2		move container to workspace $ws2
bindsym $mod+Shift+3		move container to workspace $ws3
bindsym $mod+Shift+4		move container to workspace $ws4
bindsym $mod+Shift+5		move container to workspace $ws5
bindsym $mod+Shift+6		move container to workspace $ws6
bindsym $mod+Shift+7		move container to workspace $ws7
bindsym $mod+Shift+8		move container to workspace $ws8
bindsym $mod+Shift+9		move container to workspace $ws9
bindsym $mod+Shift+0		move container to workspace $ws10

bindsym $mod+Tab			workspace back_and_forth

# panic mode
bindsym $mod+Shift+Delete	exec $truemute; exec playerctl pause; workspace lmao; exec $term -e htop; exec $term -e ranger

# Move focus between screens
#bindsym $mod+Alt+h focus output left
#bindsym $mod+Alt+Left focus output left
#bindsym $mod+Alt+l focus output right
#bindsym $mod+Alt+Right focus output right

# i3 things

# restart i3 inplace
bindsym $mod+F2		restart

# Power stuff
bindsym $mod+e		exec	rofi-power
bindsym $mod+Escape exec 	lock

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id $incvol
bindsym XF86AudioLowerVolume exec --no-startup-id $decvol
bindsym XF86AudioMute exec --no-startup-id $mute

# Media player controls
bindsym XF86AudioPlay exec mpc toggle
bindsym XF86AudioStio exec mpc stop
bindsym XF86AudioNext exec mpc next
bindsym XF86AudioPrev exec mpc prev

###---Scratchpad Windows---###

for_window [instance="dropdown"] floating enable
for_window [instance="dropdown"] resize set 625 400
for_window [instance="dropdown"] move position center
for_window [instance="dropdown"] move scratchpad

bindsym $mod+u				[instance="dropdown"] scratchpad show; move position center

###---Start things---###

# Set wallpaper and colors
exec_always --no-startup-id wal -i $wallpaper -a 90 -o "~/.scripts/wal.sh"
exec_always --no-startup-id xrdb -merge ~/.Xresources
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

# other daemons
exec --no-startup-id pulseaudio --start
#exec --no-startup-id mpDris2
exec --no-startup-id "devmon --no-gui"
exec --no-startup-id redshift
exec --no-startup-id dunst
exec --no-startup-id compton
exec --no-startup-id /usr/lib/kdeconnectd

# persistent terminals
exec --no-startup-id i3-msg 'workspace $ws10; append_layout ~/.config/i3/workspaces/media.json; workspace $ws1'
exec --no-startup-id $term -t "ncmpcpp-container" -e ncmpcpp
exec --no-startup-id $term -t "ncmpcpp-visualiser-container" -e ncmpcpp --screen visualizer
exec --no-startup-id $term -t "dropdown" -e sh -c "neofetch; fish"

